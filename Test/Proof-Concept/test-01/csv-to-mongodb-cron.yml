apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: csv-to-mongodb-cronjob
spec:
  schedule: "0 6-23/2 * * *" # A las 6, 8, 10, ..., 22 horas
  jobTemplate:
    spec:
      template:
        spec:
          volumes:
            - name: csv-volume
              persistentVolumeClaim:
                claimName: csv-pvc
          containers:
            - name: csv-processor
              image: csv-processor:latest
              volumeMounts:
                - mountPath: "/data"
                  name: csv-volume
              env:
                - name: MONGO_DB_URI
                  value: "mongodb://mongo-db:27017/collect"
          restartPolicy: OnFailure
